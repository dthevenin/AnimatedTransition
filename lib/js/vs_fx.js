/*

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.
*/
(function(H,x){function g(a){this.parent=k.Task;this.parent();this.constructor=g;arguments.length&&(this.setAnimations(arguments),this.keyFrames["100%"]=this)}function q(a){this.parent=k.EventSource;this.parent();this.constructor=q;a&&(this._fsm=new k.Fsm(this),this._fsm.goTo=this.goTo,this._owner=a)}function h(a){this.parent=q;this.parent(a);this.constructor=h;arguments.length&&(this._fsm.addInput(h.NEXT),this._fsm.addInput(h.PRED),this._fsm.addInput(h.FIRST),this._states_array=[])}function o(a){this.parent=
h;this.parent(a);this.constructor=o;arguments.length&&(this._transition_out_1=new TranslateAnimation(0,0,0),this._transition_out_2=new TranslateAnimation(0,0,0),this._transition_clear=new TranslateAnimation(0,0,0),this.animationDuration=o.ANIMATION_DURATION)}function m(a,c,b){this.parent=q;this.parent(a);this.constructor=m;arguments.length&&(this._animation_type=b==m.NO_ANIMATION||b==m.CARD_ANIMATION||b==m.SLIDE_ANIMATION?b:m.DEFAULT_ANIMATION,this.setNavigationBar(c),this.__nav_bar_states={})}function j(a){this.parent=
h;this.parent(a);this.constructor=j;a&&(this._transition_out=new TranslateAnimation(0,0,0),this._transition_clear=new TranslateAnimation(0,0,0),this.animationDuration=j.ANIMATION_DURATION)}function n(a,c){this.parent=h;this.parent(a,c);this.constructor=n;a&&a.setStyle("-webkit-transform-style","preserve-3d")}function t(a,c){this.parent=h;this.parent(a,c);this.constructor=t;this.animationDuration=t.ANIMATION_DURATION}var r=H.document,z=H.vs,f=z.util,k=z.core,P=z.ui,u=z.fx,s=f.setElementTransform,p=
z.SUPPORT_3D_TRANSFORM;if(f.vsTestStyle.webkitTransform!==x)var A="-webkit-animation-duration",D="-webkit-animation-delay",y="-webkit-animation-name",E="webkitAnimationEnd",I="-webkit-animation-timing-function",B="-webkit-transition-duration",F="-webkit-transition-delay",G="webkitTransitionEnd",J="-webkit-transition-timing-function",K="-webkit-transition-property",L="-webkit-transform-origin",C="-webkit-animation-iteration-count",w="-webkit-transform",M="-webkit-keyframes";else f.vsTestStyle.msTransform!==
x?(A="-ms-animation-duration",D="-ms-animation-delay",y="-ms-animation-name",E="msAnimationEnd",I="-ms-animation-timing-function",B="-ms-transition-duration",F="-ms-transition-delay",G="msTransitionEnd",J="-ms-transition-timing-function",K="-ms-transition-property",L="-ms-transform-origin",C="-ms-animation-iteration-count",w="-ms-transform",M="-ms-keyframes"):(A="animation-duration",D="animation-delay",y="animation-name",E="animationEnd",I="animation-timing-function",B="transition-duration",F="transition-delay",
G="transitionEnd",J="transition-timing-function",K="transition-property",L="transform-origin",C="animation-iteration-count",w="transform",M="keyframes");var Q=RegExp(/\$width/g),R=RegExp(/\$height/g),S=RegExp(/\$x/g),T=RegExp(/\$y/g),O=RegExp(/\$\{([\w]+)\}/g),U=function(a,c,b,d){if(!c||!a||!a.view)console.error("procesAnimation: invalid component parameter!");else{var e,h,j,v,o,n=k.createId(),m=c.keyFrames["0%"]?!0:!1;e=function(){var b;b=m?A:B;f.isArray(c.origin)&&2===c.origin.length&&a.setStyle(L,
c.origin[0]+"% "+c.origin[1]+"%");f.isString(c.durations)?a.setStyle(b,c.durations):f.isArray(c.durations)?a.setStyle(b,c.durations.join(", ")):a.setStyle(b,g.DEFAULT_DURATION);b=m?D:F;f.isNumber(c.delay)?a.setStyle(b,c.delay+"ms"):a.setStyle(b,"0");b=m?I:J;f.isString(c.timings)?a.setStyle(b,c.timings):f.isArray(c.timings)?a.setStyle(b,c.timings.join(", ")):a.setStyle(b,g.EASE);m&&("infinite"===c.iterationCount?a.setStyle(C,"infinite"):!c.iterationCount||!f.isNumber(c.iterationCount)?a.setStyle(C,
"1"):a.setStyle(C,c.iterationCount))};h=function(b,d){var e,g=[],h;if(f.isNumber(b))return b;if(f.isString(b)){b=b.replace(Q,a.size[0]+"px");b=b.replace(R,a.size[1]+"px");b=b.replace(S,a.position[0]+"px");b=b.replace(T,a.position[1]+"px");for(e=O.exec(b);e&&2===e.length;)g.push(e[1]),e=O.exec(b);for(e=0;e<g.length;e++)h=g[e],"undefined"!==typeof d[h]?b=b.replace("${"+h+"}",d[h]):"undefined"!==typeof c[h]&&(b=b.replace("${"+h+"}",c[h]));return b}console.warn("vs.fx.Animation._parseValue. Unknown value's type: "+
b);return 0};j=function(){e();var f,g=this;f=function(e){e.currentTarget===a.view&&(a.view.removeEventListener(G,f,!1),a.view.style.removeProperty(B),a.view.style.removeProperty(F),c.delegate&&c.delegate.taskDidEnd&&c.delegate.taskDidEnd(c),b&&b.call(d?d:g))};0===parseFloat(a.view.style[B])&&(a.view.style[B]="0.0001s");a.view.addEventListener(G,f,!1);v()};v=function(){var b=c.keyFrames["100%"]?c.keyFrames["100%"]:c,d="",e,f=[],g;if(b)for(i=0;i<c.properties.length;i++)e=c.properties[i],g=h(c.values[i],
b),"rotate"===e?(d+="rotate("+g+") ",e=w):"skew"===e?(d+="skew("+g+") ",e=w):p&&"translate"===e?(d+="translate3d("+g+") ",e=w):"translate"===e?(d+="translate("+g+") ",e=w):"translateX"===e?(d+="translateX("+g+") ",e=w):"translateY"===e?(d+="translateY("+g+") ",e=w):"rotateX"===e?(d+="rotateX("+g+") ",e=w):"rotateY"===e?(d+="rotateY("+g+") ",e=w):"scale"===e?(d+="scale("+g+") ",e=w):a.setStyle(e,g),-1==f.indexOf(e)&&f.push(e);d&&s(a.view,d);a.setStyle(K,f.join(","))};o=function(){e();var f,h;f=function(e){if(e.currentTarget===
a.view){a.view.removeEventListener(E,f,!1);m&&v();a.view.style.removeProperty(A);a.view.style.removeProperty(D);if(h=a.getStyle(y))h=h.replace(n,""),a.setStyle(y,h);try{if((data=g.__css_animations[n])&&2===data.length)r.getElementsByTagName("head")[0].removeChild(data[0]),delete g.__css_animations[n]}catch(j){return console.error(j),!1}c.delegate&&c.delegate.taskDidStop&&c.delegate.taskDidEnd(c);b&&b.call(d?d:self)}};0===parseFloat(a.view.style[A])&&(a.view.style[A]="0.0001s");a.view.addEventListener(E,
f,!1);h=(h=a.getStyle(y))?h+(", "+n):n;a.setStyle(y,h)};m?function(){var b,d,e,v,j,l,k,m=r.createElement("style");m.type="text/css";var N="";for(d in c.keyFrames){l="";b=c.keyFrames[d];e="";if(f.isArray(b))for(v=0;v<b.length;v++)k=b[v],null==k||"undefined"==typeof k||(k=h(k,c),(j=c.properties[v])&&("rotate"===j?l+="rotate("+k+") ":"skew"===j?l+="skew("+k+") ":p&&"translate"===j?l+="translate3d("+k+") ":"translate"===j?l+="translate("+k+") ":"translateX"===j?l+="translateX("+k+") ":"translateY"===
j?l+="translateY("+k+") ":"rotateX"===j?l+="rotateX("+k+") ":"rotateY"===j?l+="rotateY("+k+") ":"scale"===j?l+="scale("+k+") ":"perspective"===j?l+="perspective("+k+") ":e+=j+":"+k+";"));else for(v=0;v<c.properties.length;v++)k=h(c.values[v],b),(j=c.properties[v])&&("rotate"===j?l+="rotate("+k+") ":"skew"===j?l+="skew("+k+") ":p&&"translate"===j?l+="translate3d("+k+") ":"translate"===j?l+="translate("+k+") ":"translateX"===j?l+="translateX("+k+") ":"translateY"===j?l+="translateY("+k+") ":"rotateX"===
j?l+="rotateX("+k+") ":"rotateY"===j?l+="rotateY("+k+") ":"scale"===j?l+="scale("+k+") ":"perspective"===j?l+="perspective("+k+") ":e+=j+":"+k+";");l&&(e+=w+": "+l+";");N+=d+" { "+e+" } "}b=r.createTextNode("@"+M+" "+n+" { "+N+" }");m.appendChild(b);r.getElementsByTagName("head")[0].appendChild(m);g.__css_animations[n]=[m,a];o()}():j();return n}};g.__css_animations={};g.DEFAULT_DURATION="0.3s";g.DEFAULT_TIMING=g.EASE;g.prototype={properties:null,values:null,durations:null,timings:null,origin:null,
iterationCount:1,delay:0,keyFrames:null,setAnimations:function(a){var c,b,d;this.properties=[];this.values=[];this.timings=[];this.keyFrames={};this.timings=this.durations=this.origin=null;for(c=0;c<a.length;c++)d=a[c],!f.isArray(d)||2!==d.length?console.warn("vs.fx.Animation, invalid animations"):(b=d[0],d=d[1],!f.isString(b)||!f.isString(d)?console.warn("vs.fx.Animation, invalid constructor argument option: ["+b+", "+d+"]"):(this.properties.push(b),this.values.push(d)))},addKeyFrame:function(a,
c){if(c)if("from"===a)this.keyFrames["0%"]=c;else if("to"===a)this.keyFrames["100%"]=c;else if(f.isNumber(a)&&!(0>a||100<a))this.keyFrames[a+"%"]=c},process:function(a,c,b){return U(a,this,c,b)},clone:function(){var a=new g,c,b;a.keyFrames={};a.keyFrames["100%"]=a;a.properties=this.properties?this.properties.slice():[];a.values=this.values?this.values.slice():[];this.durations&&(a.durations=this.durations);a.timings=this.timings?this.timings.slice():[];this.origin&&(a.origin=this.origin.slice());
if(this.keyFrames)for(c in this.keyFrames)"100%"!==c&&(b=this.keyFrames[c],a.keyFrames[c]=f.isArray(b)?b.slice():z.util.clone(b));a.iterationCount=this.iterationCount;a.delay=this.delay;return a},start:function(a){this.process(a)}};f.extendClass(g,k.Task);f.defineClassProperties(g,{duration:{set:function(a){a&&(this.durations=[a])},get:function(){return this.durations&&this.durations.length?this.durations[0]:g.DEFAULT_DURATION}},timing:{set:function(a){a&&(this.timings=[a])},get:function(){return this.timings&&
this.timings.length?this.timings[0]:g.EASE}}});g.EASE="ease";g.LINEAR="linear";g.EASE_IN="ease-in";g.EASE_OUT="ease-out";g.EASE_IN_OUT="ease-in-out";TranslateAnimation=function(a,c,b){this.parent=g;arguments.length?(p?this.parent(["translate","${x}px,${y}px,${z}px"]):this.parent(["translate","${x}px,${y}px"]),f.isNumber(a)&&(this.x=a),f.isNumber(c)&&(this.y=c),f.isNumber(b)&&(this.z=b)):this.parent();this.constructor=TranslateAnimation};TranslateAnimation.prototype={x:0,y:0,z:0};f.extendClass(TranslateAnimation,
g);RotateAnimation=function(a){this.parent=g;arguments.length?(this.parent(["rotate","${deg}deg"]),f.isNumber(a)&&(this.deg=a)):this.parent();this.constructor=RotateAnimation};RotateAnimation.prototype={deg:0};f.extendClass(RotateAnimation,g);RotateXYZAnimation=function(a,c,b){this.parent=g;arguments.length?(this.parent(["rotateX","${degX}deg"],["rotateY","${degY}deg"],["rotate","${degZ}deg"]),f.isNumber(a)&&(this.degX=a),f.isNumber(c)&&(this.degY=c),f.isNumber(b)&&(this.degZ=b)):this.parent();this.constructor=
RotateXYZAnimation};RotateXYZAnimation.prototype={degX:0,degY:0,degZ:0};f.extendClass(RotateXYZAnimation,g);ScaleAnimation=function(a,c){this.parent=g;arguments.length?(this.parent(["scale","${sx},${sy}"]),f.isNumber(a)&&(this.sx=a),f.isNumber(c)&&(this.sy=c),f.isNumber(c)||(this.sy=this.sx)):this.parent();this.constructor=ScaleAnimation};ScaleAnimation.prototype={sx:1,sy:1};f.extendClass(ScaleAnimation,g);SkewAnimation=function(a,c){this.parent=g;arguments.length?(this.parent(["skew","${ax}deg,${ay}deg"]),
f.isNumber(a)&&(this.ax=a),f.isNumber(c)&&(this.ay=c)):this.parent();this.constructor=SkewAnimation};SkewAnimation.prototype={ax:0,ay:0};f.extendClass(SkewAnimation,g);OpacityAnimation=function(a){this.parent=g;arguments.length?(this.parent(["opacity","${value}"]),f.isNumber(a)&&(this.value=a)):this.parent();this.constructor=OpacityAnimation};OpacityAnimation.prototype={value:1};f.extendClass(OpacityAnimation,g);g.SlideOutRight=new g(["translateX","$width"]);g.SlideOutRight.addKeyFrame(0,["0px"]);
g.SlideOutLeft=new g(["translateX","-$width"]);g.SlideOutLeft.addKeyFrame(0,["0px"]);g.SlideOutTop=new g(["translateY","-$height"]);g.SlideOutTop.addKeyFrame(0,["0px"]);g.SlideOutBottom=new g(["translateY","$height"]);g.SlideOutBottom.addKeyFrame(0,["0px"]);g.SlideInRight=new g(["translateX","0px"]);g.SlideInRight.addKeyFrame(0,["$width"]);g.SlideInLeft=new g(["translateX","0px"]);g.SlideInLeft.addKeyFrame(0,["-$width"]);g.SlideInTop=new g(["translateY","0px"]);g.SlideInTop.addKeyFrame(0,["-$height"]);
g.SlideInBottom=new g(["translateY","0px"]);g.SlideInBottom.addKeyFrame(0,["$height"]);g.FadeIn=new g(["opacity","1"]);g.FadeIn.addKeyFrame(0,["0"]);g.FadeOut=new g(["opacity","0"]);g.FadeOut.addKeyFrame(0,["1"]);u.Animation=g;u.cancelAnimation=function(a){if(!a)return!1;var c,b;if((b=g.__css_animations[a])&&2===b.length){if(!b[1]||!b[1].getStyle||!b[0])return!1;c=b[1].getStyle(y);if(!c)return!1;c=c.replace(a,"");b[1].setStyle(y,c);try{r.getElementsByTagName("head")[0].removeChild(b[0])}catch(d){return console.error(d),
!1}delete g.__css_animations[a]}else return!1;return!0};u.TranslateAnimation=TranslateAnimation;u.RotateAnimation=RotateAnimation;u.RotateXYZAnimation=RotateXYZAnimation;u.ScaleAnimation=ScaleAnimation;u.SkewAnimation=SkewAnimation;u.OpacityAnimation=OpacityAnimation;q.prototype={_delegate:null,_owner:null,_fsm:null,_initial_component:null,destructor:function(){this._owner&&(this._owner.__controller__=x,this._owner.remove=this._owner._ab_controller_remove,this._owner._ab_controller_remove=x);this._delegate=
x;f.free(this._fsm);k.EventSource.prototype.destructor.call(this)},initComponent:function(){k.EventSource.prototype.initComponent.call(this);this._fsm&&this._fsm.init();this._owner?this._owner.__controller__?console.error("The owner already use a controller"):(this._owner.__controller__=this,this._owner._ab_controller_remove=this._owner.remove,this._owner.remove=this.ab_controller_remove):console.error("Invalid vs.fx.Controller, owner is null vs.fx.Controller.id = '"+this._id+"'")},ab_controller_remove:function(a){a&&
((state=this.__controller__._fsm._list_of_state[a.id])?this.__controller__.remove(a):this._ab_controller_remove(a))},isStateExit:function(a){return!this._fsm?!1:this._fsm._list_of_state[a]?!0:!1},add:function(a,c,b,d){console.warn("vs.fx.Controller.add is deprecated. Use vs.fx.Controller.push");return this.push(a,c,b,d)},push:function(a,c,b,d){if(a&&this._fsm){c||(c={});var e=null,g,h,e=f.isString(a)&&c.id?c.id:!f.isString(a)&&a.id?a.id:k.createId();if(!this.isStateExit(e)){this._fsm.addState(e);
this._fsm._list_of_state[e].bindings={};if(d&&d.length)for(h=0;h<d.length;h++)g=d[h],!g||3!==g.length?console.warn("vs.fx.Controller.push: invalid binding information"):this.componentBind(e,g[0],g[1],g[2]);this.setStateComponentInformation(e,a,b,c);return e}}},remove:function(a){if(a&&this._owner&&this._fsm){var c=null;f.isString(a)?c=a:f.isString(a)||(c=a.id);(a=this._fsm._list_of_state[c])&&a.comp&&this._owner._ab_controller_remove(a.comp);this._fsm.removeState(c)}},setStateComponentInformation:function(a,
c,b,d){a&&this._fsm&&this._fsm.existState(a)&&c&&this._owner&&(d=d?f.clone(d):{},a=this._fsm._list_of_state[a],a.init_data=d,f.isString(c)?(a.comp_name=c,a.comp=x):(a.comp_name="",a.comp=c,this._owner.isChild(c)||this._owner.add(c,b)))},addTransition:function(a,c,b,d,e){var g;if(a&&this._fsm&&this._fsm.existState(a)&&c&&this._fsm.existState(c)&&b)for(g in this._fsm.existInput(b)||this._fsm.addInput(b),this._fsm.addTransition(a,c,b),this._fsm._list_of_state[a].transitionEvents)b=this._fsm._list_of_state[a].transitionEvents[g],
b.to===c&&(b.animation_out=d,b.animation_in=e)},_animateComponents:function(a,c,b,d,e,g){var f=this,h=function(){try{e&&e.call(f._owner),f._delegate&&f._delegate.animationDidEnd&&(console.warn("animationDidEnd is deprecated. Please use 'controllerAnimationDidEnd'."),f._delegate.animationDidEnd(f)),f._delegate&&f._delegate.controllerAnimationDidEnd&&f._delegate.controllerAnimationDidEnd(a,c,f)}catch(b){console.error(b)}};H.setTimeout(function(){try{if(c.show(),!d&&!b)h.call(f);else{if(g){if(d){var e=
d.durations;d.durations="0s"}if(b){var j=b.durations;b.durations="0s"}}d&&!b?d.process(c,h,f):!d&&b?b.process(a,h,f):(d&&d.process(c,h,f),b&&b.process(a));g&&(d&&(d.durations=e),b&&(b.durations=j))}}catch(k){console.error(k)}},0)},componentBind:function(a,c,b,d){if(this._fsm){var e=this._fsm._list_of_state[a],f;e&&(f=e.bindings[c],f||(f=[],e.bindings[c]=f),f.push([b,d]),a===this._current_state&&e.comp.bind(c,b,d))}},refresh:function(){},getCurrentState:function(){return!this._fsm?void 0:this._fsm._current_state},
configureNewComponent:function(){},_beforeStateEnter:function(a,c){if(a&&(a.comp_name||a.comp)){var b,d,e,f;a.comp||(a.comp=this._owner.createAndAddComponent(a.comp_name,a.init_data,a.extension),a.comp.configure(a.init_data),a.comp&&a.comp.propertiesDidChange&&a.comp.propertiesDidChange(),a.comp.propertyChange(),this.configureNewComponent(a.comp));e=c;a.data_adaptation_func&&(e=a.data_adaptation_func(c));if(e){for(d in e)if(a.comp.__lookupSetter__(d)||a.comp.hasOwnProperty(d))a.comp[d]=e[d];a.comp.propertyChange()}for(b in a.bindings)if(d=
a.bindings[b])for(e=0;e<d.length;e++)(f=d[e])&&(f[1]?a.comp.bind(b,f[0],f[1]):a.comp.bind(b,f[0]))}},_beforeStateExit:function(a){if(a&&a.comp){var c,b,d,e;for(c in a.bindings)if(b=a.bindings[c])for(d=0;d<b.length;d++)(e=b[d])&&(e[1]?a.comp.unbind(c,e[0],e[1]):a.comp.bind(c,e[0]))}},goTo:function(a,c,b,d){var e,g=null;if(!a||!this._list_of_state[a])return console.warn("vs.fx.Controller.goTo unknown State id:"+a),!1;this._current_state&&(b&&(g=this._list_of_state[this._current_state].transitionEvents[b.on]),
e=this._list_of_state[this._current_state],this.owner._beforeStateExit(e));this._current_state=a;a=this._list_of_state[this._current_state];this.owner._beforeStateEnter(a,b?b.data:null);e&&e.comp&&e.comp.viewWillDisappear&&e.comp.viewWillDisappear();a.comp.viewWillAppear&&a.comp.viewWillAppear();this.owner._delegate&&this.owner._delegate.controllerViewWillChange&&(e?this.owner._delegate.controllerViewWillChange(e.comp,a.comp,this.owner):this.owner._delegate.controllerViewWillChange(null,a.comp,this.owner));
g?this.owner._animateComponents(e.comp,a.comp,g.animation_out,g.animation_in,null,d):a.comp.show();if(c&&this._output_action[c])if(d=this._output_action[c],d instanceof Function)d.call(this._owner,b);else if(f.isString(d))this._owner[this._output_action[c]](b);return!0},notify:function(a,c){this._fsm&&a&&a.type&&this._fsm.fsmNotify(a.type,a.data,c)},clear:function(){this._fsm&&this._fsm.clear()}};f.extendClass(q,k.EventSource);f.defineClassProperties(q,{initialComponent:{set:function(a){!this._fsm||
!a?this._initial_component=x:this._fsm.existState(a)&&(this._initial_component=a,this._fsm.initialState=a,this._fsm.goTo(a))},get:function(){return this._initial_component}},delegate:{set:function(a){this._delegate=a}}});u.Controller=q;h.ANIMATION_DURATION=350;h.NEXT="next";h.PRED="pred";h.FIRST="first";h.prototype={_is_tactile:!1,_owner_handler_event_extended:!1,_owner_handler_event:null,_animation_duration:h.ANIMATION_DURATION,_last_comp_id:null,_states_array:null,__nb_panels:0,_view_size:null,
destructor:function(){delete this._states_array;q.prototype.destructor.call(this)},initComponent:function(){q.prototype.initComponent.call(this);this.isTactile=this._is_tactile;this._updateViewSize()},push:function(a,c,b,d){if(a&&(c||(c={}),a=q.prototype.push.call(this,a,c,b,d))){this._states_array.push(a);this.__nb_panels++;if(1===this.__nb_panels)return this._last_comp_id=this.initialComponent=a;this.addTransition(this._last_comp_id,a,h.NEXT);this.addTransition(a,this._last_comp_id,h.PRED);this.addTransition(a,
this._initial_component,h.FIRST);if(this._last_comp_id===this._initial_state){state=this._fsm._list_of_state[a];if(!state){console.error("Unknown error in vs.fx.StackController.push");return}state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,b),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange());state.comp.show()}return this._last_comp_id=
a}},_updateViewSize:function(){},remove:function(a){if(a){var c=null;f.isString(a)?c=a:f.isString(a)||(c=a.id);var b=this._states_array.findItem(c);if(-1!==b){this._fsm.removeTransitionTo(c,h.NEXT);this._fsm.removeTransitionFrom(c,h.PRED);this._fsm.removeTransitionFrom(c,h.FIRST);this._states_array.remove(b);this.__nb_panels--;if(0===b&&0<this.__nb_panels){this._initial_component=this._states_array[0];for(var d in this._states_array)d!==c&&d!==this._initial_component&&(this._fsm.removeTransitionFrom(d,
h.FIRST),this.addTransition(d,this._initial_component,h.FIRST))}0===this.__nb_panels&&(this._initial_component=x,this._fsm._current_state=x);this._initial_component&&(this._fsm._current_state===c?0===b?this._fsm.goTo(this._initial_component):(b===this._states_array.length&&b--,this._fsm.goTo(this._states_array[b])):this._fsm.goTo(this._fsm._current_state));q.prototype.remove.call(this,a)}}},orientationDidChange:function(){this._updateViewSize()},goToViewId:function(a,c){var b=this._states_array.findItem(a);
if(-1===b)return!1;this.goToViewAt(b,c)},goToViewAt:function(a,c){if(0>a||a>this._states_array.length)return!1;var b=this._states_array.findItem(this._fsm._current_state);if(b===a)return!0;if(a>b){for(;b<a-1;)this._fsm.fsmNotify(h.NEXT,null,!0),b++;return this._fsm.fsmNotify(h.NEXT,c)}for(;a+1<b;)this._fsm.fsmNotify(h.PRED,null,!0),b--;return this._fsm.fsmNotify(h.PRED,c)},goToNextView:function(a){return this._fsm.fsmNotify(h.NEXT,null,a)},goToPreviousView:function(a){return this._fsm.fsmNotify(h.PRED,
null,a)},goToFirstView:function(a){return this._fsm.fsmNotify(h.FIRST,a)},handleEvent:function(){}};f.extendClass(h,q);f.defineClassProperties(h,{viewSize:{set:function(a){a&&f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._view_size||(this._view_size=[]),this._view_size[0]=a[0],this._view_size[1]=a[1],this._updateViewSize())},get:function(){return!this._view_size?this._owner.size:this._view_size.slice()}},isTactile:{set:function(a){a?(this._is_tactile=!0,this._owner&&this._owner.view&&
(this._owner_handler_event_extended||(this._owner.view.addEventListener(k.POINTER_START,this._owner,!1),this._owner_handler_event=this._owner.handleEvent,this._owner.handleEvent=this.handleEvent),this._owner_handler_event_extended=!0)):(this._is_tactile=!1,this._owner&&this._owner.view&&this._owner_handler_event_extended&&(this._owner.view.removeEventListener(k.POINTER_START,this._owner,!1),this._owner.handleEvent=this._owner_handler_event,this._owner_handler_event_extended=!1))},get:function(){return this._is_tactile}},
animationDuration:{set:function(a){a||(a=0);f.isNumber(a)&&(this._animation_duration=a)}}});u.StackController=h;o.ANIMATION_DURATION=500;o.HORIZONTAL=0;o.VERTICAL=1;o.prototype={_delta:0,_orientation:o.HORIZONTAL,_transition_out_1:null,_transition_out_2:null,_transition_clear:null,_updateViewSize:function(){var a=this.viewSize,c,b,d,e;this._orientation===o.HORIZONTAL?(this._transition_out_1.x=-a[0],this._transition_out_1.y=0,this._transition_out_2.x=a[0],this._transition_out_2.y=0):this._orientation===
o.VERTICAL&&(this._transition_out_1.x=0,this._transition_out_1.y=-a[1],this._transition_out_2.x=0,this._transition_out_2.y=a[1]);this._orientation===o.HORIZONTAL?e="translate3D(-"+a[0]+"px,0,0)":this._orientation===o.VERTICAL&&(e="translate3D(0,-"+a[1]+"px,0)");for(c=0;c<this._states_array.length;c++)if(b=this._states_array[c],(d=this._fsm._list_of_state[b])&&d.comp)this._fsm._current_state===b?(this._orientation===o.HORIZONTAL?e="translate3D("+a[0]+"px,0,0)":this._orientation===o.VERTICAL&&(e="translate3D(0,"+
a[1]+"px,0)"),d.comp.view.style.webkitTransitionDuration="0",s(d.comp.view,"translate3D(0,0,0)")):(d.comp.view.style.webkitTransitionDuration="0",s(d.comp.view,e))},push:function(a,c,b,d){if(a&&(c||(c={}),a=q.prototype.push.call(this,a,c,b,d))){this._states_array.push(a);this.__nb_panels++;if(1===this.__nb_panels)return this._last_comp_id=this.initialComponent=a;this.addTransition(this._last_comp_id,a,h.NEXT,this._transition_out_1,this._transition_clear);this.addTransition(a,this._last_comp_id,h.PRED,
this._transition_out_2,this._transition_clear);if(state=this._fsm._list_of_state[a])return this._last_comp_id===this._initial_component?(state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,b),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange()),state.comp.show(),state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)):
state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)),this._last_comp_id=a;console.error("Unknown error in vs.fx.StackController.push")}},configureNewComponent:function(a){var c,b;b=this.viewSize;this._orientation===o.HORIZONTAL?c="translate3D("+b[0]+"px,0,0)":this._orientation===o.VERTICAL&&(c="translate3D(0,"+b[1]+"px,0)");a.view.style.webkitTransitionDuration="0";s(a.view,c)},handleEvent:function(a){var c=!1,b=this.size,d=this.__controller__._animation_duration;
a.type===k.POINTER_START?(this.__pos=this.__controller__._orientation===o.HORIZONTAL?a.changedTouches?a.changedTouches[0].clientX:a.clientX:a.changedTouches?a.changedTouches[0].clientY:a.clientY,r.addEventListener(k.POINTER_END,this,!0),r.addEventListener(k.POINTER_MOVE,this,!0),this.__delta=this.animationDuration=0):a.type===k.POINTER_MOVE?(a.preventDefault(),this.__delta=this.__controller__._orientation===o.HORIZONTAL?a.changedTouches?a.changedTouches[0].clientX-this.__pos:a.clientX-this.__pos:
a.changedTouches?a.changedTouches[0].clientY-this.__pos:a.clientY-this.__pos):a.type===k.POINTER_END&&(50<this.__delta?c=this.__controller__.goToPreviousView():-50>this.__delta&&(c=this.__controller__.goToNextView()),c||(this.animationDuration=d=this.__controller__._orientation===o.HORIZONTAL?Math.floor(d*this.__delta/b[0]):Math.floor(d*this.__delta/b[1])),r.removeEventListener(k.POINTER_END,this,!0),r.removeEventListener(k.POINTER_MOVE,this,!0))},refresh:function(){h.prototype.refresh.call(this);
this._updateViewSize()}};f.extendClass(o,h);f.defineClassProperties(o,{orientation:{set:function(a){a!==o.HORIZONTAL&&a!==o.VERTICAL||(this._orientation=a,this._updateViewSize())},get:function(){return this._orientation}},animationDuration:{set:function(a){a||(a=0);f.isNumber(a)&&(this._animation_duration=a,this._transition_out_1.duration=this._animation_duration+"ms",this._transition_out_2.duration=this._animation_duration+"ms",this._transition_clear.duration=this._animation_duration+"ms")}}});u.SlideController=
o;m.NO_ANIMATION=0;m.CARD_ANIMATION=1;m.SLIDE_ANIMATION=2;m.DEFAULT_ANIMATION=m.SLIDE_ANIMATION;m.BACK="back";m.prototype={_nav_bar:null,__nav_bar_states:null,_animation_type:m.DEFAULT_ANIMATION,destructor:function(){q.prototype.destructor.call(this)},initComponent:function(){q.prototype.initComponent.call(this);var a=this._owner.size;this.__translate_in_right=new TranslateAnimation(0);this.__translate_out_right=new TranslateAnimation(a[0]);this.__translate_out_left=new TranslateAnimation(-a[0]);
this.__translate_in_left=new TranslateAnimation(0)},setNavigationBar:function(a){a&&!(!a instanceof P.NavigationBar)&&(this._nav_bar=a)},refresh:function(){q.prototype.refresh.call(this);this._updateViewSize()},_updateViewSize:function(){var a=this.viewSize;this.__translate_out_left.x=-a[0];this.__translate_out_right.x=a[0]},push:function(a,c,b){if(a&&(c||(c={}),a=q.prototype.push.call(this,a,c,null,b)))return(c=this._fsm._list_of_state[a])&&c.comp&&this.configureNewComponent(c.comp),a},configureNavigationBarState:function(a,
c){var b,d,e,g,h=[],j={};if(this._fsm._list_of_state[a]&&c){for(d=0,e=c.length;d<e;d++)if(g=c[d])if(b=g.comp)f.isString(b)&&(b=k.Object._obs[b]),!b instanceof z.ui.View||(h.push(b),g.properties&&(j[b.id]=g.properties));this.__nav_bar_states[a]=j;this._nav_bar&&this._nav_bar.setStateItems(a,h)}},configureTransition:function(a,c,b){a&&this._fsm.existState(a)&&c&&this._fsm.existState(c)&&b&&(this._fsm.existInput(b)||this._fsm.addInput(b),this._animation_type===m.SLIDE_ANIMATION?(this.addTransition(a,
c,b,this.__translate_out_left,this.__translate_in_right),this.addTransition(c,a,m.BACK,this.__translate_out_right,this.__translate_in_left),this.__translate_in_left.duration="300ms",this.__translate_out_left.duration="300ms",this.__translate_in_right.duration="300ms",this.__translate_out_right.duration="300ms"):this._animation_type===m.CARD_ANIMATION?(this.addTransition(a,c,b,null,this.__translate_in_right),this.addTransition(c,a,m.BACK,this.__translate_out_right,null),this.__translate_in_right.duration=
"300ms",this.__translate_out_right.duration="300ms"):(this.addTransition(a,c,b,null,this.__translate_in_right),this.addTransition(c,a,m.BACK,this.__translate_out_right,null),this.__translate_in_right.duration="0",this.__translate_out_right.duration="0"))},configureNewComponent:function(a){a.translation=[this.viewSize[0],0]},goTo:function(a,c,b,d){q.prototype.goTo.call(this,a,c,b,d)&&this.owner._nav_bar&&this.owner._nav_bar.changeState(a,this.owner.__nav_bar_states[a])}};f.extendClass(m,h);f.defineClassProperties(m,
{viewSize:{set:function(a){a&&f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._view_size||(this._view_size=[]),this._view_size[0]=a[0],this._view_size[1]=a[1],this._updateViewSize())},get:function(){return!this._view_size?this._owner.size:this._view_size.slice()}},initialComponent:{set:function(a){if(a){if(this._fsm.existState(a)&&(this._initial_component=a,this._fsm.initialState=a,this._fsm.goTo(a),(a=this._fsm._list_of_state[a])&&a.comp))a.comp.translation=[0,0]}else this._initial_component=
x},get:function(){return this._initial_component}}});u.NavigationController=m;j.ANIMATION_DURATION=500;j.LEFT_OUT=0;j.RIGHT_OUT=1;j.TOP_OUT=2;j.BOTTOM_OUT=3;j.prototype={_direction:j.LEFT_OUT,_transition_out:null,_transition_clear:null,_updateViewSize:function(){var a=this.viewSize;this._transition_out&&(this._direction===j.LEFT_OUT?(this._transition_out.x=-a[0],this._transition_out.y=0):this._direction===j.RIGHT_OUT?(this._transition_out.x=a[0],this._transition_out.y=0):this._direction===j.BOTTOM_OUT?
(this._transition_out.x=0,this._transition_out.y=a[1]):(this._transition_out.x=0,this._transition_out.y=-a[1]))},push:function(a,c,b,d){if(a&&(c||(c={}),a=q.prototype.push.call(this,a,c,b,d))){this._states_array.push(a);this.__nb_panels++;if(1===this.__nb_panels)return this._last_comp_id=this.initialComponent=a;this.addTransition(this._last_comp_id,a,h.NEXT,null,this._transition_clear);this.addTransition(a,this._last_comp_id,h.PRED,this._transition_out,null);if(state=this._fsm._list_of_state[a])return this._last_comp_id===
this._initial_component?(state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,b),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange()),state.comp.show(),state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)):state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)),
this._last_comp_id=a;console.error("Unknown error in vs.fx.StackController.push")}},configureNewComponent:function(a){var c,b;b=this.viewSize;c=p?"translate3d":"translate";c=this._direction===j.LEFT_OUT?c+("(-"+b[0]+"px,0"):this._direction===j.RIGHT_OUT?c+("("+b[0]+"px,0"):this._direction===j.BOTTOM_OUT?c+("(0,"+b[1]+"px"):c+("(0,-"+b[1]+"px");c=p?c+",0)":c+")";a.view.style.webkitTransitionDuration="0";s(a.view,c)},handleEvent:function(a){var c=!1,b,d;if(a.type===k.POINTER_START)this.__pos=this.__controller__._direction===
j.LEFT_OUT||this.__controller__._direction===j.RIGHT_OUT?a.changedTouches?a.changedTouches[0].clientX:a.clientX:a.changedTouches?a.changedTouches[0].clientY:a.clientY,r.addEventListener(k.POINTER_END,this,!0),r.addEventListener(k.POINTER_MOVE,this,!0);else if(a.type===k.POINTER_MOVE)if(a.preventDefault(),b=this.__controller__._fsm._list_of_state[this.__controller__._fsm._current_state],c=this.__controller__._states_array.indexOf(this.__controller__._fsm._current_state),0<c&&(d=this.__controller__._states_array[c-
1]),this.__controller__._direction===j.LEFT_OUT||this.__controller__._direction===j.RIGHT_OUT?(this.__delta=a.changedTouches?a.changedTouches[0].clientX-this.__pos:a.clientX-this.__pos,a=p?"translate3d("+this.__delta+"px,0px,0)":"translate("+this.__delta+"px,0px)"):(this.__delta=a.changedTouches?a.changedTouches[0].clientY-this.__pos:a.clientY-this.__pos,a=p?"translate3d(0px,"+this.__delta+"px,0)":"translate(0px,"+this.__delta+"px)"),this.__controller__._direction===j.LEFT_OUT||this.__controller__._direction===
j.TOP_OUT)if(0>this.__delta)b.comp.view.style.webkitTransitionDuration=0,s(b.comp.view,a);else{if(d&&(b=this.__controller__._fsm._list_of_state[d])&&b.comp)a=this.__controller__._direction===j.LEFT_OUT||this.__controller__._direction===j.RIGHT_OUT?p?"translate3d("+(this.__delta-this._size[0])+"px,0px,0)":"translate("+(this.__delta-this._size[0])+"px,0px)":p?"translate3d(0px,"+(this.__delta-this._size[1])+"px,0)":"translate(0px,"+(this.__delta-this._size[1])+"px)",b.comp.view.style.webkitTransitionDuration=
0,s(b.comp.view,a)}else if(0<this.__delta)b.comp.view.style.webkitTransitionDuration=0,s(b.comp.view,a);else{if(d&&(b=this.__controller__._fsm._list_of_state[d])&&b.comp)a=this.__controller__._direction===j.LEFT_OUT||this.__controller__._direction===j.RIGHT_OUT?p?"translate3d("+(this._size[0]+this.__delta)+"px,0px,0)":"translate("+(this._size[0]+this.__delta)+"px,0px)":p?"translate3d(0px,"+(this._size[1]+this.__delta)+"px,0)":"translate(0px,"+(this._size[1]+this.__delta)+"px)",b.comp.view.style.webkitTransitionDuration=
0,s(b.comp.view,a)}else if(a.type===k.POINTER_END){b=this.__controller__._fsm._list_of_state[this.__controller__._fsm._current_state];this.__controller__._direction===j.LEFT_OUT||this.__controller__._direction===j.TOP_OUT?50<this.__delta?c=this.__controller__.goToPreviousView():-50>this.__delta&&(c=this.__controller__.goToNextView()):50<this.__delta?c=this.__controller__.goToNextView():-50>this.__delta&&(c=this.__controller__.goToPreviousView());if(!c)if(c=this.__controller__._states_array.indexOf(this.__controller__._fsm._current_state),
0<c&&(d=this.__controller__._states_array[c-1]),(this.__controller__._direction===j.LEFT_OUT||this.__controller__._direction===j.TOP_OUT)&&0>this.__delta)a=p?"translate3d(0,0,0)":"translate(0,0)",b.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",s(b.comp.view,a);else if((this.__controller__._direction===j.RIGHT_OUT||this.__controller__._direction===j.BOTTOM_OUT)&&0<this.__delta)a=p?"translate3d(0,0,0)":"translate(0,0)",b.comp.view.style.webkitTransitionDuration=
this.__controller__._animation_duration+"ms",s(b.comp.view,a);else if(d&&(b=this.__controller__._fsm._list_of_state[d])&&b.comp)a=this.__controller__._direction===j.LEFT_OUT?"(-"+this._size[0]+"px,0px":this.__controller__._direction===j.RIGHT_OUT?"("+this._size[0]+"px,0px":this.__controller__._direction===j.BOTTOM_OUT?"(0px,"+this._size[1]+"px":"(0px,-"+this._size[1]+"px",a=p?a+",0)":a+")",b.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",s(b.comp.view,a);r.removeEventListener(k.POINTER_END,
this,!0);r.removeEventListener(k.POINTER_MOVE,this,!0)}}};f.extendClass(j,h);f.defineClassProperties(j,{direction:{set:function(a){a!==j.LEFT_OUT&&a!==j.RIGHT_OUT&&a!==j.BOTTOM_OUT&&a!==j.TOP_OUT||(this._direction=a,this._updateViewSize())},get:function(){return this._direction}},animationDuration:{set:function(a){a||(a=0);f.isNumber(a)&&(this._animation_duration=a,this._transition_out&&(this._transition_out.duration=this._animation_duration+"ms"),this._transition_clear&&(this._transition_clear.duration=
this._animation_duration+"ms"))}}});u.CardController=j;n._translate_animation=new RotateXYZAnimation(-90,0,0);n._translate_animation.init();n._translate_animation.addKeyFrame("from",{degX:0});n._translate_animation.addKeyFrame(50,{degX:-92});n._translate_animation.addKeyFrame(70,{degX:-84});n._translate_animation.addKeyFrame(80,{degX:-90});n._translate_animation.addKeyFrame(95,{degX:-88});n._translate_animation.durations="2s";n.HORIZONTAL=0;n.VERTICAL=1;n.prototype={_orientation:n.HORIZONTAL,push:function(a,
c,b){if(a){if(!f.isString(a)){var d=this._states_array.length;a.position=[0,0];a.setStyle("z-index",1E3-d)}return h.prototype.push.call(this,a,c,b)}},handleEvent:function(a){var c=!1,b,d;if(a.type===k.POINTER_START)this.__pos=this.__layer._orientation===n.HORIZONTAL?a.changedTouches?a.changedTouches[0].clientX:a.clientX:a.changedTouches?a.changedTouches[0].clientY:a.clientY,r.addEventListener(k.POINTER_END,this,!0),r.addEventListener(k.POINTER_MOVE,this,!0),this.animationDuration=0;else if(a.type===
k.POINTER_MOVE)if(a.preventDefault(),b=this.__layer._list_of_state[this.__layer._current_state],c=this.__layer._states_array.indexOf(this.__layer._current_state),0<c&&(d=this.__layer._states_array[c-1]),this.__layer._orientation===n.HORIZONTAL?(this.__delta=a.changedTouches?a.changedTouches[0].clientX-this.__pos:a.clientX-this.__pos,a=p?"translate3d("+this.__delta+"px,0px,0)":"translate("+this.__delta+"px,0px)"):(this.__delta=a.changedTouches?a.changedTouches[0].clientY-this.__pos:a.clientY-this.__pos,
a=p?"translate3d(0px,"+this.__delta+"px,0)":"translate(0px,"+this.__delta+"px)"),0>this.__delta)b.comp.view.style.webkitTransitionDuration=0,s(b.comp.view,a);else{if(d&&(b=this.__layer._list_of_state[d])&&b.comp)a=this.__layer._orientation===n.HORIZONTAL?p?"translate3d("+(this.__delta-this._size[0])+"px,0px,0)":"translate("+(this.__delta-this._size[0])+"px,0px)":p?"translate3d(0px,"+(this.__delta-this._size[1])+"px,0)":"translate(0px,"+(this.__delta-this._size[1])+"px)",b.comp.view.style.webkitTransitionDuration=
0,s(b.comp.view,a)}else if(a.type===k.POINTER_END){b=this.__layer._list_of_state[this.__layer._current_state];50<this.__delta?c=this.__layer.goToPreviousView():-50>this.__delta&&(c=this.__layer.goToNextView());if(!c)if(c=this.__layer._states_array.indexOf(this.__layer._current_state),0<c&&(d=this.__layer._states_array[c-1]),0>this.__delta)a=p?"translate3d(0,0,0)":"translate(0,0)",b.comp.view.style.webkitTransitionDuration=this.__layer._animation_duration+"ms",s(b.comp.view,a);else if(d&&(b=this.__layer._list_of_state[d])&&
b.comp)a=this.__layer._orientation===n.HORIZONTAL?p?"translate3d("+this._size[0]+"px,0px,0)":"translate("+this._size[0]+"px,0px)":p?"translate3d(0px,-"+this._size[1]+"px,0)":"translate(0px,-"+this._size[1]+"px)",b.comp.view.style.webkitTransitionDuration=this.__layer._animation_duration+"ms",s(b.comp.view,a);r.removeEventListener(k.POINTER_END,this,!0);r.removeEventListener(k.POINTER_MOVE,this,!0)}},goTo:function(a,c,b){function d(a){var b=this._list_of_state[this._states_array[a]];b&&(b.comp||(b.comp=
this.owner.createAndAddComponent(b.comp_name,b.init_data,b.extension),b.comp.configure(b.init_data),b.comp.style("position","absolute"),b.comp&&b.comp.propertiesDidChange&&b.comp.propertiesDidChange(),b.comp.propertyChange()),b.view?__setPos(b.view,0,0):b.comp.position=[0,0],b.comp.show(),b.comp.style("z-index",1E3-a))}var e=this._states_array.indexOf(a),g=this._list_of_state[this._current_state];h.prototype.goTo.call(this,a,c,b);if(a&&(this.owner.animationDuration=this._animation_duration,a=this._list_of_state[this._current_state],
a.comp.setStyle("position","absolute"),a.comp.position=[0,0],a.comp.setStyle("z-index",1E3-e),g&&a&&(g.comp.setStyle("-webkit-transform","scale3d(.835,.835,.835) translateZ(200px)"),a.comp.setStyle("-webkit-transform","scale3d(.835,.835,.835) rotateX(90deg) translateZ(200px)")),0<e&&d.call(this,e-1),e<this._states_array.length-1&&d.call(this,e+1),b&&b.on===h.NEXT&&g?n._translate_animation.process(this.owner):b&&b.on===h.PRED&&a&&(n._translate_animation.x=0,n._translate_animation.y=0,n._translate_animation.process(a.comp)),
c&&this._output_action[c]))if(e=this._output_action[c],e instanceof Function)e.call(this.owner,b);else if(f.isString(e))this.owner[this._output_action[c]](b)}};f.extendClass(n,h);u.CubicController=n;t._opacity_animation=new OpacityAnimation(1);t._opacity_animation.init();t._opacity_animation.durations="0.2s";t.ANIMATION_DURATION=500;t.prototype={push:function(a,c,b){if(a){if(!f.isString(a)){var d=this._states_array.length;a.position=[0,0];a.setStyle("z-index",1E3-d)}h.prototype.push.call(this,a,c,
b)}},goTo:function(a,c,b){function d(a){var b=this._list_of_state[this._states_array[a]];b&&(b.comp||(b.comp=this.owner.createAndAddComponent(b.comp_name,b.init_data,b.extension),b.comp.configure(b.init_data),b.comp.setStyle("position","absolute"),b.comp&&b.comp.propertiesDidChange&&b.comp.propertiesDidChange(),b.comp.propertyChange()),b.view?__setPos(b.view,0,0):b.comp.position=[0,0],b.comp.show(),b.comp.setStyle("z-index",1E3-a))}var e=this._states_array.indexOf(a),g=this._list_of_state[this._current_state];
h.prototype.goTo.call(this,a,c,b);if(a&&(a=this._list_of_state[this._current_state],a.comp.setStyle("position","absolute"),a.comp.position=[0,0],a.comp.setStyle("z-index",1E3-e),0<e&&d.call(this,e-1),e<this._states_array.length-1&&d.call(this,e+1),b&&b.on===h.NEXT&&g?(t._opacity_animation.value=0,t._opacity_animation.process(g.comp)):b&&b.on===h.PRED&&a&&(t._opacity_animation.value=1,t._opacity_animation.process(a.comp)),c&&this._output_action[c]))if(e=this._output_action[c],e instanceof Function)e.call(this.owner,
b);else if(f.isString(e))this.owner[this._output_action[c]](b)}};f.extendClass(t,h);f.defineClassProperty(t,"animationDuration",{set:function(a){a||(a=0);f.isNumber(a)&&(this._animation_duration=a,t._opacity_animation.durations=a/1E3+"s")}});u.OpacityController=t})(window);
